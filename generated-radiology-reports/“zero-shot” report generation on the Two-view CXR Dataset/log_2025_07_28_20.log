task:	test
data_name:	mimic_cxr
ann_path:	/home/miao/data/dataset/MIMIC-CXR/mlrg_multiview_cxr_annotation_v1.1.json
view_position_embed:	/home/miao/data/dataset/MIMIC-CXR/five_work_mimic_cxr_view_position_v1.1.json
images_dir:	/home/miao/data/dataset/MIMIC-CXR/files/
max_length:	100
num_workers:	8
is_save_checkpoint:	True
is_multiview_learning:	True
is_prior_scan:	True
using_mpc_loss:	False
using_local_loss:	False
is_prior_report:	True
is_indication:	True
report_style:	factual_serialization
ckpt_zoo_dir:	/home/miao/data/dataset/checkpoints
text_encoder_num_layers:	6
cross_modal_fusion_num_layers:	1
multiview_fusion_num_layers:	3
num_heads:	8
pt_lr:	5e-06
ft_lr:	5e-05
temp:	0.5
monitor_metric:	RCB
epochs:	50
batch_size:	6
hidden_size:	768
resume:	None
load:	None
test_ckpt_path:	../script/results/mimic_cxr/finetune/v1011-MLRG-ft-RCB_2024_10_12_14/best_model.ckpt
version:	v1011-MLRG-ft-RCB
chexbert_path:	/home/miao/data/dataset/checkpoints/chexbert.pth
bert_path:	/home/miao/data/dataset/checkpoints/bert-base-uncased
rad_dino_path:	/home/miao/data/dataset/checkpoints/microsoft/rad-dino
radgraph_path:	/home/miao/data/dataset/checkpoints/radgraph
cxr_bert_path:	/home/miao/data/dataset/checkpoints/microsoft/BiomedVLP-CXR-BERT-specialized
distilgpt2_path:	/home/miao/data/dataset/checkpoints/distilbert/distilgpt2
cvt2distilgpt2_path:	/home/miao/data/dataset/checkpoints/mimic_cxr_jpg_chen/cvt_21_to_gpt2/epoch=8-val_chen_cider=0.425092.ckpt
seed:	9233
num_gpus:	1
num_beams:	3
save_period:	1
exp_dir_trial:	results/mimic_cxr/test/v1011-MLRG-ft-RCB_2025_07_28_20
print_step:	500
device:	cuda
monitor_mode:	max
checkpoint_dir:	results/mimic_cxr/test/v1011-MLRG-ft-RCB_2025_07_28_20/checkpoint
time:	2025_07_28_20

task:	test
data_name:	mimic_cxr
ann_path:	/home/miao/data/dataset/MIMIC-CXR/mlrg_multiview_cxr_annotation_v1.1.json
view_position_embed:	/home/miao/data/dataset/MIMIC-CXR/five_work_mimic_cxr_view_position_v1.1.json
images_dir:	/home/miao/data/dataset/MIMIC-CXR/files/
max_length:	100
num_workers:	8
is_save_checkpoint:	True
is_multiview_learning:	True
is_prior_scan:	True
using_mpc_loss:	False
using_local_loss:	False
is_prior_report:	True
is_indication:	True
report_style:	factual_serialization
ckpt_zoo_dir:	/home/miao/data/dataset/checkpoints
text_encoder_num_layers:	6
cross_modal_fusion_num_layers:	1
multiview_fusion_num_layers:	3
num_heads:	8
pt_lr:	5e-06
ft_lr:	5e-05
temp:	0.5
monitor_metric:	RCB
epochs:	50
batch_size:	6
hidden_size:	768
resume:	None
load:	None
test_ckpt_path:	../script/results/mimic_cxr/finetune/v1011-MLRG-ft-RCB_2024_10_12_14/best_model.ckpt
version:	v1011-MLRG-ft-RCB
chexbert_path:	/home/miao/data/dataset/checkpoints/chexbert.pth
bert_path:	/home/miao/data/dataset/checkpoints/bert-base-uncased
rad_dino_path:	/home/miao/data/dataset/checkpoints/microsoft/rad-dino
radgraph_path:	/home/miao/data/dataset/checkpoints/radgraph
cxr_bert_path:	/home/miao/data/dataset/checkpoints/microsoft/BiomedVLP-CXR-BERT-specialized
distilgpt2_path:	/home/miao/data/dataset/checkpoints/distilbert/distilgpt2
cvt2distilgpt2_path:	/home/miao/data/dataset/checkpoints/mimic_cxr_jpg_chen/cvt_21_to_gpt2/epoch=8-val_chen_cider=0.425092.ckpt
seed:	9233
num_gpus:	1
num_beams:	3
save_period:	1
exp_dir_trial:	results/mimic_cxr/test/v1011-MLRG-ft-RCB_2025_07_28_20
print_step:	500
device:	cuda
monitor_mode:	max
checkpoint_dir:	results/mimic_cxr/test/v1011-MLRG-ft-RCB_2025_07_28_20/checkpoint
time:	2025_07_28_20

task:	test
data_name:	mimic_cxr
ann_path:	/home/miao/data/dataset/MIMIC-CXR/mlrg_multiview_cxr_annotation_v1.1.json
view_position_embed:	/home/miao/data/dataset/MIMIC-CXR/five_work_mimic_cxr_view_position_v1.1.json
images_dir:	/home/miao/data/dataset/MIMIC-CXR/files/
max_length:	100
num_workers:	8
is_save_checkpoint:	True
is_multiview_learning:	True
is_prior_scan:	True
using_mpc_loss:	False
using_local_loss:	False
is_prior_report:	True
is_indication:	True
report_style:	factual_serialization
ckpt_zoo_dir:	/home/miao/data/dataset/checkpoints
text_encoder_num_layers:	6
cross_modal_fusion_num_layers:	1
multiview_fusion_num_layers:	3
num_heads:	8
pt_lr:	5e-06
ft_lr:	5e-05
temp:	0.5
monitor_metric:	RCB
epochs:	50
batch_size:	6
hidden_size:	768
resume:	None
load:	None
test_ckpt_path:	../script/results/mimic_cxr/finetune/v1011-MLRG-ft-RCB_2024_10_12_14/best_model.ckpt
version:	v1011-MLRG-ft-RCB
chexbert_path:	/home/miao/data/dataset/checkpoints/chexbert.pth
bert_path:	/home/miao/data/dataset/checkpoints/bert-base-uncased
rad_dino_path:	/home/miao/data/dataset/checkpoints/microsoft/rad-dino
radgraph_path:	/home/miao/data/dataset/checkpoints/radgraph
cxr_bert_path:	/home/miao/data/dataset/checkpoints/microsoft/BiomedVLP-CXR-BERT-specialized
distilgpt2_path:	/home/miao/data/dataset/checkpoints/distilbert/distilgpt2
cvt2distilgpt2_path:	/home/miao/data/dataset/checkpoints/mimic_cxr_jpg_chen/cvt_21_to_gpt2/epoch=8-val_chen_cider=0.425092.ckpt
seed:	9233
num_gpus:	1
num_beams:	3
save_period:	1
exp_dir_trial:	results/mimic_cxr/test/v1011-MLRG-ft-RCB_2025_07_28_20
print_step:	500
device:	cuda
monitor_mode:	max
checkpoint_dir:	results/mimic_cxr/test/v1011-MLRG-ft-RCB_2025_07_28_20/checkpoint
time:	2025_07_28_20

No. of test examples: 3947.
No. of test examples: 3947.
Testing step 0/658
Testing step 0/658
Testing step 500/658
Testing step 500/658
Testing step 657/658
Testing step 657/658
###############################################################
test is over, current metrics:F1-Radgraph-partial: 0.3006162545201451
chexbert_5_micro_f1: 0.5318766836276564
chexbert_5_macro_f1: 0.47547974249270125
chexbert_all_micro_p: 0.5301796743402583
chexbert_all_micro_r: 0.4703611457036115
chexbert_all_micro_f1: 0.4984822489111786
chexbert_all_macro_p: 0.438553037352431
chexbert_all_macro_r: 0.36284843112071974
chexbert_all_macro_f1: 0.3732251820513344
chexbert_accuracy: 0.4879655434507221
chen_bleu_1: 0.41514732112853847
chen_bleu_2: 0.27291363775902255
chen_bleu_3: 0.19683094927660935
chen_bleu_4: 0.15041534992613484
chen_meteor: 0.1753064880661585
chen_rouge: 0.31741487694541104
chen_cider: 0.3216671493903661
chen_num_examples: 3947
RB: 0.45103160444628
RC: 0.7990985034313237
RCB: 0.9495138533574585 

###############################################################
test is over, current metrics:F1-Radgraph-partial: 0.3006162545201451
chexbert_5_micro_f1: 0.5318766836276564
chexbert_5_macro_f1: 0.47547974249270125
chexbert_all_micro_p: 0.5301796743402583
chexbert_all_micro_r: 0.4703611457036115
chexbert_all_micro_f1: 0.4984822489111786
chexbert_all_macro_p: 0.438553037352431
chexbert_all_macro_r: 0.36284843112071974
chexbert_all_macro_f1: 0.3732251820513344
chexbert_accuracy: 0.4879655434507221
chen_bleu_1: 0.41514732112853847
chen_bleu_2: 0.27291363775902255
chen_bleu_3: 0.19683094927660935
chen_bleu_4: 0.15041534992613484
chen_meteor: 0.1753064880661585
chen_rouge: 0.31741487694541104
chen_cider: 0.3216671493903661
chen_num_examples: 3947
RB: 0.45103160444628
RC: 0.7990985034313237
RCB: 0.9495138533574585 

